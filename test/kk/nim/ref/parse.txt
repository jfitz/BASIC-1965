100 REM THIS PROGRAM PLAYS THREE-PILE NIM, WITH RANDOM NUMBERS
 Remark:THIS PROGRAM PLAYS THREE-PILE NIM, WITH RANDOM NUMBERS
110 REM IN EACH PILE. PLAYER WHO CLEARS BOARD WINS.
 Remark:IN EACH PILE. PLAYER WHO CLEARS BOARD WINS.
120
130 REM INITIALIZE
 Remark:INITIALIZE
140 FOR P = 1 TO 3
 control: VariableName:P
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:3"]
150    LET N(P) = INT(10*RND(0))+6
 ScalarValue:P
 ScalarReference:N
 NumericConstant:10
 NumericConstant:0
 FunctionRnd
 BinaryOperator:*
 FunctionInt
 NumericConstant:6
 BinaryOperator:+
 AssignmentOperator:=
160 NEXT P
 VariableName:P
170 PRINT "INITIAL CONFIGURATION:"
 ITEMS
 TextConstant:"INITIAL CONFIGURATION:"
 CarriageControl:NL
180 PRINT
 ITEMS
 CarriageControl:NL
190 GOSUB 900
 LineNumber:900
200
210 REM OPPONENT'S MOVE
 Remark:OPPONENT'S MOVE
220 PRINT "PILE, NUMBER TAKEN";
 ITEMS
 TextConstant:"PILE, NUMBER TAKEN"
 CarriageControl:;
230 INPUT P, N
 ScalarReference:P
 ScalarReference:N
240 LET N(P) = N(P) - N
 ScalarValue:P
 ScalarReference:N
 ScalarValue:P
 ScalarValue:N
 ScalarValue:N
 BinaryOperator:-
 AssignmentOperator:=
250 IF N(P) >= 0 THEN 300
 ScalarValue:P
 ScalarValue:N
 NumericConstant:0
 BinaryOperator:>=
260 PRINT "ILLEGAL MOVE"
 ITEMS
 TextConstant:"ILLEGAL MOVE"
 CarriageControl:NL
270 LET N(P) = N(P) + N
 ScalarValue:P
 ScalarReference:N
 ScalarValue:P
 ScalarValue:N
 ScalarValue:N
 BinaryOperator:+
 AssignmentOperator:=
280 PRINT
 ITEMS
 CarriageControl:NL
290 GOTO 200
 LineNumber:200
300 IF N(1)+N(2)+N(3) > 0 THEN 370
 NumericConstant:1
 ScalarValue:N
 NumericConstant:2
 ScalarValue:N
 BinaryOperator:+
 NumericConstant:3
 ScalarValue:N
 BinaryOperator:+
 NumericConstant:0
 BinaryOperator:>
310 PRINT
 ITEMS
 CarriageControl:NL
320 PRINT "YOU WIN *****"
 ITEMS
 TextConstant:"YOU WIN *****"
 CarriageControl:NL
330 PRINT
 ITEMS
 CarriageControl:NL
340 PRINT
 ITEMS
 CarriageControl:NL
350 GOTO 140
 LineNumber:140
360
370 REM SET UP BIT-PATTERNS
 Remark:SET UP BIT-PATTERNS
380 FOR P = 1 TO 3
 control: VariableName:P
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:3"]
390    LET X = N(P)
 ScalarReference:X
 ScalarValue:P
 ScalarValue:N
 AssignmentOperator:=
400    FOR J = 4 TO 1 STEP -1
 control: VariableName:J
 start:   ["NumericConstant:4"]
 end:     ["NumericConstant:1"]
 step:    ["NumericConstant:1", "UnaryOperator:-"]
410       LET Y = INT(X/2)
 ScalarReference:Y
 ScalarValue:X
 NumericConstant:2
 BinaryOperator:/
 FunctionInt
 AssignmentOperator:=
420       LET B(P,J) = X - 2*Y
 ScalarValue:P
 ScalarValue:J
 ScalarReference:B
 ScalarValue:X
 NumericConstant:2
 ScalarValue:Y
 BinaryOperator:*
 BinaryOperator:-
 AssignmentOperator:=
430       LET X = Y
 ScalarReference:X
 ScalarValue:Y
 AssignmentOperator:=
440    NEXT J
 VariableName:J
450 NEXT P
 VariableName:P
460
470 REM FIND COLUMN PARITIES
 Remark:FIND COLUMN PARITIES
480 FOR J = 1 TO 4
 control: VariableName:J
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:4"]
490    LET S(J) = B(1,J) + B(2,J) + B(3,J)
 ScalarValue:J
 ScalarReference:S
 NumericConstant:1
 ScalarValue:J
 ScalarValue:B
 NumericConstant:2
 ScalarValue:J
 ScalarValue:B
 BinaryOperator:+
 NumericConstant:3
 ScalarValue:J
 ScalarValue:B
 BinaryOperator:+
 AssignmentOperator:=
500    LET S(J) = S(J) - 2*INT(S(J)/2)
 ScalarValue:J
 ScalarReference:S
 ScalarValue:J
 ScalarValue:S
 NumericConstant:2
 ScalarValue:J
 ScalarValue:S
 NumericConstant:2
 BinaryOperator:/
 FunctionInt
 BinaryOperator:*
 BinaryOperator:-
 AssignmentOperator:=
510 NEXT J
 VariableName:J
520
530 REM IF ALL EVEN, MAKE RANDOM MOVE
 Remark:IF ALL EVEN, MAKE RANDOM MOVE
540 IF S(1)+S(2)+S(3)+S(4) > 0 THEN 610
 NumericConstant:1
 ScalarValue:S
 NumericConstant:2
 ScalarValue:S
 BinaryOperator:+
 NumericConstant:3
 ScalarValue:S
 BinaryOperator:+
 NumericConstant:4
 ScalarValue:S
 BinaryOperator:+
 NumericConstant:0
 BinaryOperator:>
550 FOR P = 1 TO 3
 control: VariableName:P
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:3"]
560    IF N(P) = 0 THEN 590
 ScalarValue:P
 ScalarValue:N
 NumericConstant:0
 BinaryOperator:=
570    LET N = INT(N(P)*RND(0)) + 1
 ScalarReference:N
 ScalarValue:P
 ScalarValue:N
 NumericConstant:0
 FunctionRnd
 BinaryOperator:*
 FunctionInt
 NumericConstant:1
 BinaryOperator:+
 AssignmentOperator:=
580    GOTO 770
 LineNumber:770
590 NEXT P
 VariableName:P
600
610 REM MAKE OPTIMAL MOVE
 Remark:MAKE OPTIMAL MOVE
620 FOR J = 1 TO 4
 control: VariableName:J
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:4"]
630    IF S(J) > 0 THEN 650
 ScalarValue:J
 ScalarValue:S
 NumericConstant:0
 BinaryOperator:>
640 NEXT J
 VariableName:J
650 FOR P = 1 TO 3
 control: VariableName:P
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:3"]
660    IF B(P,J) = 1 THEN 680
 ScalarValue:P
 ScalarValue:J
 ScalarValue:B
 NumericConstant:1
 BinaryOperator:=
670 NEXT P
 VariableName:P
680 LET N = 0
 ScalarReference:N
 NumericConstant:0
 AssignmentOperator:=
690 FOR J = J TO 4
 control: VariableName:J
 start:   ["ScalarValue:J"]
 end:     ["NumericConstant:4"]
700    IF S(J) = 0 THEN 750
 ScalarValue:J
 ScalarValue:S
 NumericConstant:0
 BinaryOperator:=
710    IF B(P,J) = 0 THEN 740
 ScalarValue:P
 ScalarValue:J
 ScalarValue:B
 NumericConstant:0
 BinaryOperator:=
720    LET N = N + 2^(4-J)
 ScalarReference:N
 ScalarValue:N
 NumericConstant:2
 NumericConstant:4
 ScalarValue:J
 BinaryOperator:-
 BinaryOperator:^
 BinaryOperator:+
 AssignmentOperator:=
730    GOTO 750
 LineNumber:750
740    LET N = N - 2^(4-J)
 ScalarReference:N
 ScalarValue:N
 NumericConstant:2
 NumericConstant:4
 ScalarValue:J
 BinaryOperator:-
 BinaryOperator:^
 BinaryOperator:-
 AssignmentOperator:=
750 NEXT J
 VariableName:J
760
770 REM CARRY OUT MOVE
 Remark:CARRY OUT MOVE
780 PRINT
 ITEMS
 CarriageControl:NL
790 PRINT "MY MOVE:" P; "," N
 ITEMS
 TextConstant:"MY MOVE:"
 CarriageControl:
 ScalarValue:P
 CarriageControl:;
 TextConstant:","
 CarriageControl:
 ScalarValue:N
 CarriageControl:NL
800 PRINT
 ITEMS
 CarriageControl:NL
810 LET N(P) = N(P) - N
 ScalarValue:P
 ScalarReference:N
 ScalarValue:P
 ScalarValue:N
 ScalarValue:N
 BinaryOperator:-
 AssignmentOperator:=
820 IF N(1)+N(2)+N(3) > 0 THEN 850
 NumericConstant:1
 ScalarValue:N
 NumericConstant:2
 ScalarValue:N
 BinaryOperator:+
 NumericConstant:3
 ScalarValue:N
 BinaryOperator:+
 NumericConstant:0
 BinaryOperator:>
830 PRINT "I WIN *****"
 ITEMS
 TextConstant:"I WIN *****"
 CarriageControl:NL
840 GOTO 330
 LineNumber:330
850 PRINT "NEW CONFIGURATION:"
 ITEMS
 TextConstant:"NEW CONFIGURATION:"
 CarriageControl:NL
860 PRINT
 ITEMS
 CarriageControl:NL
870 GOSUB 900
 LineNumber:900
880 GOTO 210
 LineNumber:210
890
900 REM PRINT CONFIGURATION
 Remark:PRINT CONFIGURATION
910 FOR P = 1 TO 3
 control: VariableName:P
 start:   ["NumericConstant:1"]
 end:     ["NumericConstant:3"]
920    PRINT "PILE " P; N(P)
 ITEMS
 TextConstant:"PILE "
 CarriageControl:
 ScalarValue:P
 CarriageControl:;
 ScalarValue:P
 ScalarValue:N
 CarriageControl:NL
930 NEXT P
 VariableName:P
940 PRINT
 ITEMS
 CarriageControl:NL
950 PRINT
 ITEMS
 CarriageControl:NL
960 RETURN
 
970 END
 
